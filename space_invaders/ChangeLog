
=======================================================
            WanT code:  Log of Changes 
=======================================================


24 Mar 2005      Important changes in the input format: 3 namelist instead of one,
                 variables renamed, input_parameters,f90 and input_base.f90 added;
                 many variables renamed through the code; intel compiler warning
                 on temporary array creation eliminated; references to all tests updated. (AF)

21 Mar 2005      DFT data filename written in output corrected. 
                 Timing modified in order to avoid initializations in derived types (not f90 std).
                 PGI compatibility checked. (AF)

18 Mar 2005      Fixed a bug in ions.f90: different atomic species were not properly
                 treated. (AF)

15 Mar 2005      Fixed a bug in trial_center_setup routine. Added the input flag
                 unitary_thr both in want input and hamiltonian input in order to control
                 the checks on unitariery. (AF)

11 Mar 2005      Internal format of *.ovp file (overlap and projections) changed
                 in order to increase the readability. (AF)

27 Feb 2005      The bug in the IOTK lib evidenced by the use of G95 has been fixed.
                 Some optimization improvements in trial_center_setup when calculating
                 the phases and a major improvement in projection.f90 by inverting the
                 band and wannier function loops (the trial center setup calls have been
                 scaled by the number of bands). (AF)

26 Feb 2005      Module sph_har_module updated (bug fixed in the normalization of 
                 Y_22, Y2m2). ROutine gauss1 renamed to sph_har_setup; f-spherical harmonics 
                 added to the module. IOTK updated to version 1.0.0test . A bug already 
                 present in the previous version with G95 is also present here.... (AF)

25 Feb 2005      G95 compilation tested. Trial_center_setup routine completed except
                 for the case of l = -1 (tetrahedron case, used e.g. for silicon). (AF)

21 Feb 2005      Some varibles moved away from INPUT_MODULE to other data modules
                 (such as windows_module, subspace_module, kpoints_module) in order to
                 avoid circular dependencies. (AF)

18 Feb 2005      Projection routine started being re-written. Wfc_data renamed as
                 wfc_manager.f90. TRIAL_CENTER module containing definitions and 
                 subroutines for the trial_center type and TRIAL_CENTER_DATA module
                 added to Modules. File input_wan.f90 moved to input.f90. (AF)

17 Feb 2005      The gaussians used as trials for WFs are now defined with the prefactor
                 |r|^l, i.e.   gauss(|r|) = r^l * e^{-(r/a)^2} . This is useful for 
                 the direct analytical calculation of their Fourier transform. (AF)

15 Feb 2005      Bugs fixed, new overlap procedure working and checked. (AF)

14 Feb 2005      gv_indexes routine moved from util_module to ggrids_module and improved.
                 set_overlap_map routine added. (AF) 

10 Feb 2005      Bug fixed in init_us_1 subroutine, USPP implementation is working. 
                 Test6 added (silicon USPP). Perl script added in utilities for CVS log
                 managing. (AF)

07 Feb 2005      Converters module updated with rank1 operations. Bugs fixed in
                 the USPP implementation. (AF)

06 Feb 2005      Undo of the below unification of augmentation routines.
                 We keep on using s_psi but a different augmentation routine for
                 overlap is used: add_us_overlap. This is for memory reason, 
                 in order to avoid the allocation of large workspaces. (AF)

05 Feb 2005      s_psi and sb_psi routines unified in augment_psi routine. (AF)

04 Feb 2005      Subtle bug in pw_export fixed. USPP are rightly initialized
                 (init_us_1 and init_us_2 + ccalbec). The augmentation routine
                 sb_psi added to repository. (AF)

03 Feb 2005      Wfc are now named evc everywhere (exept plot!) and their dimensions
                 are consistent with Espresso (npwkx for pw and no longer npwkx+1 as
                 was used in WanT before). Projection array (ca) is completely initialized
                 to zero. (AF)  

02 Feb 2005      init_us_2, ccalbec added in wfc_data in order to compute US basic
                 quantities. s_psi added in projections. (AF)

01 Feb 2005      Other routines imported from Espresso: sph_bes.f90, setqf.f90, 
                 allocate_nlpot.f90 . Nspin moved from kpoints_module to windows_module.
                 Variable allocation and init checked. init_us_2.f90, s_psi.f90 and
                 ccalbec.f90 added from Espresso. (AF)

31 Jan 2005      Pseudopotential routines from Espresso package inported in order 
                 to deal with USPP. Summary updated in order to describe the read PPs
                 (when they are). Added Test5 managing the calculation for the Gold
                 chain within USPP. Many old routines replaced with better versions
                 from Espresso. The g and gg (G vect in cartesian coord, their moduli) 
                 added to ggrid_module. Routines init_us_1.f90 and qvan2.f90 added.
                 (AF) 

30 Jan 2005      Few bugs fixed. (AF)

15 Jan 2005      GET_MONKPACK routine (compute the nk(:) and s(:) param of the 
                 Monkhorst-Pack grid from theinput kpts) added and hamiltonian
                 input accordingly modified. SOme other minor changes done. (AF)

14 Jan 2005      IOTK updated to v1.0.0beta4, including the workarounds for ifort and
                 pgi compilaers. (AF) 

11 Jan 2005      Incompatibility of IOTK v.0.3.5 with MKL 7.0 libs detected. (AF)

29 Dec 2004      Hamiltonian output files now are all written in work_dir from input.
                 Iotk updated to 0.3.5 and test checked. Small bugs fixed. (AF) 

24 Dec 2004      windows_module.f90 moved to windows.f90. Routine 
                 widows_read_ext added, want_init updated. Fermi energy
                 data added to windows module (and added to pw_export).
                 MXDBND moved to NBND according to PWSCF. Plot.x not
                 yet completely symcronized but compiling. New implementation
                 of wfc started in module wfc.f90. Test references updated. (AF)

23 Dec 2004      Syncronizing HAMILTONIAN. Small bugs fixed. (AF)

19 Dec 2004      Tests updated. Bug fixing in PWEXPORT-WANT interface.
                 FMT changed in overlap_module IO. (AF)

18 Dec 2004      SUMMARY subroutine completed with Gaussian centers data. Bugs fixed in 
                 WFC_READ_EXT. PROJECTION subroutine updated. Bug fixed in 
                 WANNIER_CENTERS_INIT routine. Disentangle is completely IOTK working.
                 Tests updated and checked. (AF)

17 Dec 2004      Read subroutines for DFT data renamed to *_read_ext (in order to 
                 distinguish with the routines used in the internal IO). Some variables
                 renamed according to PWSCF notation (mxdgve -> npw; npwx -> npwkx; 
                 wtkpt -> wk). window.f90 code is obsolescent. Summary routine completed.
                 Ggrids reading routine done. genbtr, spline, splint routines removed 
                 from CVS because no longer used. ZGEMM and ZGESVD removed from CVS
                 because the code is supposed to be linked with BLAS and LAPACK.
                 WFC_DATA module (managing projection and overlap calculation) added. (AF)

16 Dec 2004      Ions module rewritten, PW_EXPORT fmt modified. Pseudopotential files
                 read from DFT data, want_init and summary updated. (AF)

15 Dec 2004      Want_init procedure completed and checked; summary module added;
                 some cleaning up around done in order to locate all writing on stdout
                 at the beginning in summary routine. Routine new_bshells.f90 moved to
                 bshells.f90. (AF) 

08 Dec 2004      Want_init procedure started; lattice_module updated. (AF)

07 Dec 2004      Utility module (util.f90) updated (routine zmat_hdiag
                 added ); bug fixing in disentangle; References for tests
                 updated. (AF)
                 Further simplifications in Hamiltonian; IOTK fmt started to be
                 be used in disentangle instead of the launch.dat binary file. (AF)

04 Dec 2004      Hamiltonian code updated and sincronized with the
                 new IO fmt of other codes. Internal and output FMT of
                 Hamiltonian changed (not yet completed). 
                 Cleanup and startup routines updated. (AF)

01 Dec 2004      Utilities module updated. (AF)

30 Nov 2004      Bug in the units of gaussians (disentangle) fixed. 
                 Overlap_extract routine added and tested (do not re-compute overlaps 
                 and projections but used the data produced by disentangle).
                 PWs and wfc managing erased from wannier procedure.
                 Onfly.dat, unitary.dat and landing.dat deleted. Other IOTK data files
                 added. (AF) 

28 Nov 2004      IOTK fmt used for the internal data files.
                 Kpoints data collected in a module (update).
                 Overlap, Subspace, Windows modules added. (AF)

25 Nov 2004      Fized some portability bugs in the scripts: bash shell instead of
                 sh (thanks to Abinit guys). (AF)

20 Nov 2004      Severe bug in disentangle procedure fixed: nearest neighbor
                 shell indexes were crazy in some routines. Very often the
                 runtime execution was stable and only a minor error was produced;
                 some other times it was not. Wannier localization procedure is
                 usually poorly influenced by this change. (AF)

10 Nov 2004      Tests updated. Test1 and 2 renamed to 2 and 3; Test1 on bulk
                 silicon WFs added; Test4 about Al chains added. (AF) 
                 Various other updates in the test scripts. 

-------------------------------------------------
Date: 01 Nov 2004    Version: WanT-1.1.0
-------------------------------------------------

